import React from 'react';
import { Alert } from "react-bootstrap";
import MessageAlert from '../MessageAlert/MessageAlert';

const formatDate = (dateString) => {
    const date = new Date(dateString);  // Преобразуем строку в объект Date

    const day = String(date.getDate()).padStart(2, '0');  // Получаем день и добавляем ведущий ноль
    const month = String(date.getMonth() + 1).padStart(2, '0');  // Получаем месяц (нумерация с 0)
    const year = date.getFullYear();  // Получаем полный год (например, 2024)

    return `${day}.${month}.${year}`;  // Форматируем дату как ДД.ММ.ГГ
};


const LatestVulnerability = ({ latest }) => {
    if (!latest) {
        return (
            <MessageAlert
                message="Данные о последней базе уязвимостей пока недоступны."
                variant="info"
            />
        );
    }
    
    // Преобразуем дату в нужный формат
    const formattedDate = formatDate(latest.date);

    return (
        <div>
            <Alert style={{ width: "600px" }} variant="success">
                <h4>Последняя база уязвимостей:</h4>
                <strong>Дата обновления:</strong> {formattedDate}
                <br />
                <strong>Ссылка:</strong>{' '}
                <a href={latest.link} target="_blank" rel="noopener noreferrer">
                    Скачать базу
                </a>
            </Alert>
        </div>
    );
};

export default LatestVulnerability;
